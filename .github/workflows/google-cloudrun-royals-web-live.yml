name: Royals Web - Live

on:
  release:
    types: [published]
  workflow_dispatch:
  # push:
  #   branches:
  #     - "main"

jobs:
  depl:
    uses: ./.github/workflows/google-cloudrun-common.yml
    with:
      NUXT_PUBLIC_DIRECTUS_URL: https://enrichment-center.dev.ds.dumont.de
      NUXT_DIRECTUS_API_TOKEN: 5n65w3aaMFUMqL52y6owV5AQoXfHQXfQ
      STRAPI_URL: https://ai-verticals-strapi-ktmjadcfsa-ey.a.run.app
      NUXT_PUBLIC_BLOG_URL: https://www.royalrevue.de/
      ENV: live
      MANDATOR: royals
      NUXT_DEPLOYMENT_HASH: ${{ github.sha }}
      SERVICE: royals-verticals-web
      PROJECT_ID: dmx-case42
      CICD_GCLOUD_WORKLOAD_IDENTITY_PROVIDER: projects/734680744363/locations/global/workloadIdentityPools/github-pool/providers/github-pool
      CICD_GCLOUD_SERVICE_ACCOUNT: github-ksta-medien@dmx-case42.iam.gserviceaccount.com
